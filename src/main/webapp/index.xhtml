<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui" xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:comp="http://java.sun.com/jsf/composite/comp" xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <title>#{indexController.titlePrefix}</title>
    <meta content="text/html; charset=utf-8"/>
    <!--<c:if test="#{userController.entered}">-->
    <!--<meta http-equiv="refresh" content="0; url=home.xhtml"/>-->
    <!--</c:if>-->
    <!--<script src="https://use.fontawesome.com/51d1b53670.js" type="application/javascript"/>-->
    <h:outputStylesheet library="css" name="head.css"/>
    <h:outputStylesheet library="css" name="commons.css"/>
    <h:outputStylesheet library="css" name="index-page.css"/>
</h:head>
<h:body>
    <comp:head/>
    <p:growl autoUpdate="true"/>
    <div class="main">
        <h:form id="letter-form" enctype="multipart/form-data" acceptcharset="utf-8" styleClass="letter-form">
            <h:inputFile id="file" value="#{classificationController.file}"
                         validator="#{classificationController.validateFile}"/>
            <span>або вставте зміст листа у поле нижче</span>
            <h:inputTextarea name="letter-textfield" id="letter-textfield" rows="16" cols="50"
                             styleClass="unresizable"/>
            <h:commandButton value="Класифікувати" update="classificated" styleClass="button"
                             actionListener="#{classificationController.classificateActionListener}">
            </h:commandButton>
        </h:form>
        <div class="classification-results">
            <h:form id="classificated" acceptcharset="utf-8" rendered="#{classificationController.classificated}" styleClass="classificated-form">
                <c:set value="#{classificationController.getMostPossibleLetterType()}" var="mostPossible"/>
                <span>Лист відноситься до типу: <h:outputText value="#{mostPossible}" id="classified-letter-type" styleClass="classificated-letter"/></span>
                <h:commandButton value="Прийняти" action="index.xhtml" styleClass="button"/>
                або виберіть потрібний тип листа зі списку та натисніть 'Змінити рішення'
                <h:selectOneMenu rendered="true" id="manual-selected-letter-type" value="ssss" styleClass="letter-list">
                    <f:selectItems value="#{classificationController.classificationResults.keySet().toArray()}" var="letter" itemLabel="#{letter.tags.get(0)}"
                                   itemValue="#{letter}" />
                </h:selectOneMenu>
                <h:commandButton value="Змінити рішення" action="#{classificationController.adjustDecision()}" styleClass="button"/>
                <ui:repeat value="#{classificationController.classificationResults.keySet().toArray()}"
                           var="letterType">
                    <h:panelGrid columns="5" rendered="#{letterType.tags.get(0).equals(mostPossible)}">
                        <h:outputText value="#{letterType}" style="color: red;"/>:
                        <h:outputText value="#{classificationController.classificationResults.get(letterType)}"
                                      style="color: red;">
                            <f:convertNumber pattern="#0.00"/>
                        </h:outputText> |
                        <h:outputText style="color: red;"
                                      value="#{classificationController.normalizedClassificationResults.get(letterType)}">
                            <f:convertNumber pattern="#0.00"/>
                        </h:outputText>
                    </h:panelGrid>
                    <h:panelGrid columns="5" rendered="#{!letterType.tags.get(0).equals(mostPossible)}">
                        <h:outputText value="#{letterType}"/>:
                        <h:outputText value="#{classificationController.classificationResults.get(letterType)}">
                            <f:convertNumber pattern="#0.00"/>
                        </h:outputText> |
                        <h:outputText
                                value="#{classificationController.normalizedClassificationResults.get(letterType)}">
                            <f:convertNumber pattern="#0.00"/>
                        </h:outputText>
                    </h:panelGrid>
                </ui:repeat>
            </h:form>
        </div>
    </div>
</h:body>
</html>
